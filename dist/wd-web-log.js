!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).WdWebLog=e()}(this,(function(){"use strict";function n(n,e){return n(e={exports:{}},e.exports),e.exports}var e=n((function(n){var e=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),t=n((function(n){var e=n.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),o=(t.version,function(n){return"object"==typeof n?null!==n:"function"==typeof n}),r=function(n){if(!o(n))throw TypeError(n+" is not an object!");return n},i=function(n){try{return!!n()}catch(n){return!0}},a=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),c=e.document,s=o(c)&&o(c.createElement),u=!a&&!i((function(){return 7!=Object.defineProperty((n="div",s?c.createElement(n):{}),"a",{get:function(){return 7}}).a;var n})),f=Object.defineProperty,d={f:a?Object.defineProperty:function(n,e,t){if(r(n),e=function(n,e){if(!o(n))return n;var t,r;if(e&&"function"==typeof(t=n.toString)&&!o(r=t.call(n)))return r;if("function"==typeof(t=n.valueOf)&&!o(r=t.call(n)))return r;if(!e&&"function"==typeof(t=n.toString)&&!o(r=t.call(n)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),r(t),u)try{return f(n,e,t)}catch(n){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(n[e]=t.value),n}},p=a?function(n,e,t){return d.f(n,e,function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}(1,t))}:function(n,e,t){return n[e]=t,n},l={}.hasOwnProperty,v=function(n,e){return l.call(n,e)},h=0,m=Math.random(),g=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++h+m).toString(36))},w=n((function(n){var o=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(n.exports=function(n,e){return o[n]||(o[n]=void 0!==e?e:{})})("versions",[]).push({version:t.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),y=w("native-function-to-string",Function.toString),b=n((function(n){var o=g("src"),r=(""+y).split("toString");t.inspectSource=function(n){return y.call(n)},(n.exports=function(n,t,i,a){var c="function"==typeof i;c&&(v(i,"name")||p(i,"name",t)),n[t]!==i&&(c&&(v(i,o)||p(i,o,n[t]?""+n[t]:r.join(String(t)))),n===e?n[t]=i:a?n[t]?n[t]=i:p(n,t,i):(delete n[t],p(n,t,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||y.call(this)}))})),S=function(n,e,t){if(function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!")}(n),void 0===e)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,o){return n.call(e,t,o)};case 3:return function(t,o,r){return n.call(e,t,o,r)}}return function(){return n.apply(e,arguments)}},O=function(n,o,r){var i,a,c,s,u=n&O.F,f=n&O.G,d=n&O.S,l=n&O.P,v=n&O.B,h=f?e:d?e[o]||(e[o]={}):(e[o]||{}).prototype,m=f?t:t[o]||(t[o]={}),g=m.prototype||(m.prototype={});for(i in f&&(r=o),r)c=((a=!u&&h&&void 0!==h[i])?h:r)[i],s=v&&a?S(c,e):l&&"function"==typeof c?S(Function.call,c):c,h&&b(h,i,c,n&O.U),m[i]!=c&&p(m,i,s),l&&g[i]!=c&&(g[i]=c)};e.core=t,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var E,_,j=O,P={}.toString,k=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==function(n){return P.call(n).slice(8,-1)}(n)?n.split(""):Object(n)},x=function(n){if(null==n)throw TypeError("Can't call method on  "+n);return n},T=function(n){return k(x(n))},L=Math.ceil,M=Math.floor,C=function(n){return isNaN(n=+n)?0:(n>0?M:L)(n)},I=Math.min,R=Math.max,q=Math.min,A=w("keys"),D=(E=!1,function(n,e,t){var o,r,i=T(n),a=(o=i.length)>0?I(C(o),9007199254740991):0,c=function(n,e){return(n=C(n))<0?R(n+e,0):q(n,e)}(t,a);if(E&&e!=e){for(;a>c;)if((r=i[c++])!=r)return!0}else for(;a>c;c++)if((E||c in i)&&i[c]===e)return E||c||0;return!E&&-1}),H=A[_="IE_PROTO"]||(A[_]=g(_)),U="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),G=Object.keys||function(n){return function(n,e){var t,o=T(n),r=0,i=[];for(t in o)t!=H&&v(o,t)&&i.push(t);for(;e.length>r;)v(o,t=e[r++])&&(~D(i,t)||i.push(t));return i}(n,U)},F={f:Object.getOwnPropertySymbols},z={f:{}.propertyIsEnumerable},Q=function(n){return Object(x(n))},W=Object.assign,V=!W||i((function(){var n={},e={},t=Symbol(),o="abcdefghijklmnopqrst";return n[t]=7,o.split("").forEach((function(n){e[n]=n})),7!=W({},n)[t]||Object.keys(W({},e)).join("")!=o}))?function(n,e){for(var t=Q(n),o=arguments.length,r=1,i=F.f,c=z.f;o>r;)for(var s,u=k(arguments[r++]),f=i?G(u).concat(i(u)):G(u),d=f.length,p=0;d>p;)s=f[p++],a&&!c.call(u,s)||(t[s]=u[s]);return t}:W;function $(n){return n=window.localStorage?localStorage.getItem(n)||sessionStorage.getItem(n):(n=document.cookie.match(new RegExp("(?:^|;\\s)"+n+"=(.*?)(?:;\\s|$)")))?n[1]:""}function B(n,e,t){if(window.localStorage)try{t?localStorage.setItem(n,e):sessionStorage.setItem(n,e)}catch(n){}else document.cookie=n+"="+e+";path=/;domain="+function(){var n=window.location.host,e=n.split(".");return 2<e.length&&(n=({"com.cn":1,"js.cn":1,"net.cn":1,"gov.cn":1,"com.hk":1,"co.nz":1}[e.slice(-2).join(".")]?e.slice(-3):e.slice(-2)).join(".")),n}()+(t?";expires="+t:"")}function J(n,e){var t,o={};if(void 0===e)var r=window.location,i=r.host,a=r.pathname,c=r.search.substr(1),s=r.hash;else i=(r=e.match(/\w+:\/\/((?:[\w-]+\.)+\w+)(?::\d+)?(\/[^\?\\"'\|:<>]*)?(?:\?([^'"\\<>#]*))?(?:#(\w+))?/i)||[])[1],a=r[2],c=r[3],s=r[4];return void 0!==s&&(s=s.replace(/"|'|<|>/gi,"M")),c&&function(){for(var n=c.split("&"),e=0,t=n.length;e<t;e++)if(-1!=n[e].indexOf("=")){var r=n[e].indexOf("="),i=n[e].slice(0,r);r=n[e].slice(r+1),o[i]=r}}(),c=function(){if(void 0===c)return c;for(var e=c.split("&"),t=[],o=0,r=e.length;o<r;o++)if(-1!=e[o].indexOf("=")){var i=e[o].indexOf("="),a=e[o].slice(0,i);i=e[o].slice(i+1),n.ignoreParams&&-1!=n.ignoreParams.indexOf(a)||t.push(a+"="+i)}return t.join("&")}(),s&&function(){for(var n=0==s.indexOf("#")?s.substr(1).split("&"):s.split("&"),e=0,o=n.length;e<o;e++)if(-1!=n[e].indexOf("=")){var r=n[e].indexOf("="),i=n[e].slice(0,r);if(r=n[e].slice(r+1),"adtag"===i.toLowerCase()){t=r;break}}}(),{host:i,path:a,search:c,hash:s,param:o,adtag:t}}function K(n){var e=J(n),t={dm:e.host,pvi:"",si:"",url:e.path,arg:encodeURIComponent(e.search||"").substr(0,512),ty:0};return t.pvi=function(){if(n.userReport){var e=$("pgv_uid");e&&e==n.user.user_id||(t.ty=1,B("pgv_uid",n.user.user_id,"Sun, 18 Jan 2038 00:00:00 GMT;")),e=n.user.user_id}else(e=$("pgv_pvi"))||(t.ty=1,B("pgv_pvi",e=N(),"Sun, 18 Jan 2038 00:00:00 GMT;"));return e}(),t.si=function(){var n=$("pgv_si");return n||B("pgv_si",n=N("s")),n}(),t.url=function(){var t=e.path;return n.senseQuery&&(t+=e.search?"?"+encodeURIComponent(e.search||"").substr(0,512):""),n.senseHash&&(t+=e.hash?encodeURIComponent(e.hash):""),t}(),t}function N(n){for(var e=[0,1,2,3,4,5,6,7,8,9],t=10;1<t;t--){var o=Math.floor(10*Math.random()),r=e[o];e[o]=e[t-1],e[t-1]=r}for(t=o=0;5>t;t++)o=10*o+e[t];return(n||"")+(o+"")+ +new Date}function X(n){return{r2:n.sid}}function Y(n){var e={};if(n){var t,o=[];for(t in n)n.hasOwnProperty(t)&&o.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));n=o.join(";"),e.ext=n}return e}function Z(n){var e=J(n,document.referrer);return n=J(n),{rdm:e.host,rurl:e.path,rarg:encodeURIComponent(e.search||"").substr(0,512),adt:n.param.ADTAG||n.param.adtag||n.param.CKTAG||n.param.cktag||n.param.PTAG||n.param.ptag||n.adtag}}function nn(){try{var n=navigator,e=screen||{width:"",height:"",colorDepth:""},t={scr:e.width+"x"+e.height,scl:e.colorDepth+"-bit",lg:(n.language||n.userLanguage).toLowerCase(),tz:(new Date).getTimezoneOffset()/60}}catch(n){return{}}return t}j(j.S+j.F,"Object",{assign:V});var en={conf:{},version:"2.0.15",init:function(n){var e={sid:0,cid:0,autoReport:0,senseHash:0,senseQuery:0,userReport:0,performanceMonitor:0,ignoreParams:[]};if(n)for(var t in n)n.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(e[t]=n[t]);this.conf=e,this.conf.autoReport&&this.pgv()},pgv:function(){var n=this.conf,e=[],t=this.version;if(n.sid)if(!n.userReport||n.user&&n.user.user_id&&!parseInt(n.user.user_id,10)!==conf.user.user_id){for(var o=0,r=[K(n),Z(n),X(n),nn(),Y({version:t}),{random:+new Date}],i=r.length;o<i;o++)for(var a in r[o])r[o].hasOwnProperty(a)&&e.push(a+"="+(void 0===r[o][a]?"":r[o][a]));var c=function(n){n=("https:"==document.location.protocol?"https://pingtas.qq.com/webview":"http://pingtcss.qq.com")+"/pingd?"+n.join("&").toLowerCase();var e=new Image;e.onload=e.onerror=e.onabort=function(){e=e.onload=e.onerror=e.onabort=null},e.src=n};c(e),n.performanceMonitor&&(e=function(){for(var e=function(){if(window.performance){var n=window.performance.timing,e={value:n.domainLookupEnd-n.domainLookupStart},t={value:n.connectEnd-n.connectStart},o={value:n.responseStart-(n.requestStart||n.responseStart+1)},r=n.responseEnd-n.responseStart;n.domContentLoadedEventStart?0>r&&(r=0):r=-1,n={domainLookupTime:e,connectTime:t,requestTime:o,resourcesLoadedTime:{value:r},domParsingTime:{value:n.domContentLoadedEventStart?n.domInteractive-n.domLoading:-1},domContentLoadedTime:{value:n.domContentLoadedEventStart?n.domContentLoadedEventStart-n.fetchStart:-1}}}else n="";return n}(),o=[],r=[],i=0,a=[K(n),{r2:n.cid},nn(),{random:+new Date}],s=a.length;i<s;i++)for(var u in a[i])a[i].hasOwnProperty(u)&&r.push(u+"="+(void 0===a[i][u]?"":a[i][u]));for(u in e)e.hasOwnProperty(u)&&("domContentLoadedTime"==u?r.push("r3="+e[u].value):o.push(e[u].value));e=Y({pfm:o.join("_"),version:t}),r.push("ext="+e.ext),c(r)},void 0!==window.performance&&void 0!==window.performance.timing&&0!=window.performance.timing.loadEventEnd?e():window.attachEvent?window.attachEvent("onload",e):window.addEventListener&&window.addEventListener("load",e,!1))}else console.log("MTA H5分析错误提示：您选择了用户统计uv，请设置业务的user_id，需为int类型");else console.log("MTA H5分析错误提示：您没有设置sid")},clickStat:function(n,e){var t=this.conf,o=[],r=K(t),i=X(t);if(t.cid){r.dm="taclick",r.url=n,i.r2=t.cid,i.r5=function(n){n=void 0===n?{}:n;var e,t=[];for(e in n)n.hasOwnProperty(e)&&t.push(e+"="+encodeURIComponent(n[e]));return t.join(";")}(e);var a=0;for(r=(t=[r,Z(t),i,nn(),Y({version:this.version}),{random:+new Date}]).length;a<r;a++)for(var c in t[a])t[a].hasOwnProperty(c)&&o.push(c+"="+(void 0===t[a][c]?"":t[a][c]));o=("https:"==document.location.protocol?"https://pingtas.qq.com/webview":"http://pingtcss.qq.com")+"/pingd?"+o.join("&");var s=new Image;s.onload=s.onerror=s.onabort=function(){s=s.onload=s.onerror=s.onabort=null},s.src=o}else console.log("MTA H5分析错误提示：您没有设置cid,请到管理台开通自定义事件并更新统计代码")},clickShare:function(n){var e=this.conf,t=J(e),o=void 0===(t=t.param.CKTAG||t.param.ckatg)?[]:t.split(".");if(e.cid){t=[];var r=K(e),i=X(e);for(r.dm="taclick_share",r.url="mtah5-share-"+n,i.r2=e.cid,i.r5=function(n,e){var t=[];return 2===n.length&&"mtah5_share"==n[0]&&t.push(n[0]+"="+n[1]),t.join(";")}(o),n=0,r=(e=[r,Z(e),i,nn(),Y({version:this.version}),{random:+new Date}]).length;n<r;n++)for(var a in e[n])e[n].hasOwnProperty(a)&&t.push(a+"="+(void 0===e[n][a]?"":e[n][a]));a=("https:"==document.location.protocol?"https://pingtas.qq.com/webview":"http://pingtcss.qq.com")+"/pingd?"+t.join("&");var c=new Image;c.onload=c.onerror=c.onabort=function(){c=c.onload=c.onerror=c.onabort=null},c.src=a}else console.log("MTA H5分析错误提示：您没有设置cid,请到管理台开通自定义事件并更新统计代码")}},tn={version:"1.0.7",autoClick:!1,autoSend:!0,autoError:!0,debug:!1,type:"mta",config:{},onSend:function(n,e,t,o){},onError:function(n){}},on={mta:function(n){var e=n.debug,t=void 0!==e&&e,o=n.config,r=void 0===o?{}:o;t&&console.log("init mta",r);var i=r.sid,a=void 0===i?"":i,c=r.cid,s=void 0===c?"":c,u=r.autoReport,f=void 0===u?1:u,d=r.senseHash,p=void 0===d?1:d,l=r.senseQuery,v=void 0===l?0:l,h=r.performanceMonitor,m=void 0===h?0:h,g=r.ignoreParams,w=void 0===g?0:g;return en.init({sid:a,cid:s,autoReport:f,senseHash:p,senseQuery:v,performanceMonitor:m,ignoreParams:w}),Object.assign({},{send:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n){"string"==typeof n&&(n={event:n,data:e});var o={type:"click",event:"",data:{}};n=Object.assign({},o,n),en.clickStat(n.event,n.data||{}),t&&console.log("event_type=".concat(n.type,", event_id=").concat(n.event,", data="),{data:n.data})}}},en)}},rn=function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},tn,e);if(n.options=t,!(t.type in on))throw new Error("上报平台不存在或者尚未支持");return n.reporter=on[t.type](t),t.autoClick&&document.addEventListener("click",(function(e){var t=e.target,o=t.innerText||t.value;o&&n.send("auto_".concat(o),"",e)})),t.autoError&&(window.onerror=function(e,t,o,r,i){var a={event:e,source:t,lineno:o,colno:r,error:i};n.send("error",a),n.options.onError&&n.options.onError(a,n)}),n};rn.send=function(n,e,t){var o=rn.options,r=rn.reporter;if(!r||!o)throw new Error("实例不存在");o.autoSend&&r.send(n,e),o.onSend&&o.onSend(n,e,r,t)};var an=function(n,e){rn(e),n.directive("log",{inserted:function(n,e){var t=e.value;if(!t)throw new Error("Like v-log=\"'click'\"");n.addEventListener("click",(function(n){rn.send(t,"",n)}))}}),n.directive("stat",{inserted:function(n,e){var t=e.value;if(!t)throw new Error("Like v-stat=\"'view'\"");rn.send(t,"")}}),rn.options.autoError&&(n.config.errorHandler=function(n,e,t){var o={err:n,vm:e,info:t};rn.send("error",o),rn.options.onError&&rn.options.onError(o,rn)}),n.prototype.$stat||Object.defineProperty(n.prototype,"$stat",{value:rn.send})};return"undefined"!=typeof window&&window.Vue&&(window.WdVueLog={install:an}),rn.Vue={install:an},rn}));
